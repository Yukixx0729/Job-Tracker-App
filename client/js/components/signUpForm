document.getElementById("signup-form").addEventListener("submit", handleSignUpForm)
const signUpMsg = document.getElementById("message")
const loginButton = document.createElement('button')
loginButton.className = "loginButton"
loginButton.textContent = "Login"


const handleSignUpForm = (event) => {
  console.log(event)

  const formData = new FormData(event.target)

  const body = {
    firstName: formData.get("firstName"),
    lastName: formData.get("lastName"),
    email: formData.get("email"),
    password: formData.get("password"),
    passwordCheck: formData.get("passwordCheck")
  }

  return axios.post('/users/signup', body)
  .then(res => {
    console.log(res)
    signUpMsg.textContent = "Sign up successful!"
    signUpMsg.insertAdjacentElement('afterend', loginButton)
  })
  .catch(err => {
    console.log(err)
    signUpMsg.textContent = err.response.data.message 
  })
}